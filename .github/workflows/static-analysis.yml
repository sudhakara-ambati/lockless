name: Static Analysis

on:
  push:
    branches: [ main, master ]
  pull_request:
    branches: [ main, master ]

jobs:
  clang-tidy:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Install clang-tidy
      run: |
        sudo apt-get update
        sudo apt-get install -y clang-tidy
        
    - name: Run clang-tidy on source files
      run: |
        clang-tidy src/lockless.cpp -- -std=c++17 -I include
      continue-on-error: true
      
    - name: Run clang-tidy on examples
      run: |
        clang-tidy examples/test1.cpp -- -std=c++17 -I include
      continue-on-error: true